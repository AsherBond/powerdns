<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 20. Index of all Authoritative Server metrics</title><link rel="stylesheet" href="docbook.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /><link rel="home" href="index.html" title="PowerDNS manual" /><link rel="up" href="index.html" title="PowerDNS manual" /><link rel="prev" href="all-settings.html" title="Chapter 19. Index of all Authoritative Server settings" /><link rel="next" href="types.html" title="Chapter 21. Supported record types and their storage" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 20. Index of all Authoritative Server metrics</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="all-settings.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="types.html">Next</a></td></tr></table><hr /></div><div class="chapter" title="Chapter 20. Index of all Authoritative Server metrics"><div class="titlepage"><div><div><h2 class="title"><a id="metrics"></a>Chapter 20. Index of all Authoritative Server metrics</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="metrics.html#counters-variables">1. Counters &amp; variables</a></span></dt><dd><dl><dt><span class="sect2"><a href="metrics.html#counters">1.1. Counters</a></span></dt><dt><span class="sect2"><a href="metrics.html#id413136">1.2. Ring buffers</a></span></dt></dl></dd></dl></div><div class="sect1" title="1. Counters &amp; variables"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="counters-variables"></a>1. Counters &amp; variables</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="metrics.html#counters">1.1. Counters</a></span></dt><dt><span class="sect2"><a href="metrics.html#id413136">1.2. Ring buffers</a></span></dt></dl></div><p>
      A number of counters and variables are set during PDNS Authoritative Server operation. These can be queried with the init.d
      <span class="command"><strong>dump</strong></span>, <span class="command"><strong>show</strong></span> and <span class="command"><strong>mrtg</strong></span> commands, or viewed with the
      webserver.
      </p><div class="sect2" title="1.1. Counters"><div class="titlepage"><div><div><h3 class="title"><a id="counters"></a>1.1. Counters</h3></div></div></div><p>
      </p><div class="variablelist"><dl><dt><span class="term">corrupt-packets</span></dt><dd><p>Number of corrupt packets received</p></dd><dt><span class="term">latency</span></dt><dd><p>Average number of microseconds a packet spends within PDNS</p></dd><dt><span class="term">packetcache-hit</span></dt><dd><p>Number of packets which were answered out of the cache</p></dd><dt><span class="term">packetcache-miss</span></dt><dd><p>Number of times a packet could not be answered out of the cache</p></dd><dt><span class="term">packetcache-size</span></dt><dd><p>Amount of packets in the packetcache</p></dd><dt><span class="term">qsize-a</span></dt><dd><p>Size of the queue before the transmitting socket.</p></dd><dt><span class="term">qsize-q</span></dt><dd><p>Number of packets waiting for database attention</p></dd><dt><span class="term">servfail-packets</span></dt><dd><p>Amount of packets that could not be answered due to database problems</p></dd><dt><span class="term">tcp-answers</span></dt><dd><p>Number of answers sent out over TCP</p></dd><dt><span class="term">tcp-questions</span></dt><dd><p>Number of questions received over TCP</p></dd><dt><span class="term">timedout-questions</span></dt><dd><p>Amount of packets that were dropped because they had to wait too long internally</p></dd><dt><span class="term">udp-answers</span></dt><dd><p>Number of answers sent out over UDP</p></dd><dt><span class="term">udp-questions</span></dt><dd><p>Number of questions received over UDP</p></dd></dl></div><p>
    </p></div><div class="sect2" title="1.2. Ring buffers"><div class="titlepage"><div><div><h3 class="title"><a id="id413136"></a>1.2. Ring buffers</h3></div></div></div><p>
	  Besides counters, PDNS also maintains the ringbuffers. A ringbuffer records events, each new event gets a place
	  in the buffer until it is full. When full, earlier entries get overwritten, hence the name 'ring'.
	</p><p>
      By counting the entries in the buffer, statistics can be generated. These statistics can currently only be viewed 
      using the webserver and are in fact not even collected without the webserver running. 
    </p><p>
      The following ringbuffers are available:
    </p><p>
    </p><div class="variablelist"><dl><dt><span class="term">Log messages (logmessages)</span></dt><dd><p>All messages logged</p></dd><dt><span class="term">Queries for existing records but for a type we don't have (noerror-queries)</span></dt><dd><p>Queries for, say, the AAAA record of a domain, when only an A is available. 
	  Queries are listed in the following format: name/type. So an AAA query for pdns.powerdns.com looks like
	  pdns.powerdns.com/AAAA.</p></dd><dt><span class="term">Queries for non-existing records within existing domains(nxdomain-queries)</span></dt><dd><p>If PDNS knows it is authoritative over a domain, and it sees a question for a record in that domain
	    that does not exist, it is able to send out an authoritative 'no such domain' message. Indicates that hosts are
	    trying to connect to services really not in your zone.</p></dd><dt><span class="term">UDP queries received (udp-queries)</span></dt><dd><p>
	    All UDP queries seen.
	  </p></dd><dt><span class="term">Remote server IP addresses (remotes)</span></dt><dd><p>
	    Hosts querying PDNS. Be aware that UDP is anonymous - person A can send queries that appear to be coming from
	    person B.
	  </p></dd><dt><span class="term">Remotes sending corrupt packets (remote-corrupts)</span></dt><dd><p>
	    Hosts sending PDNS broken packets, possibly meant to disrupt service. Be aware that UDP is 
	    anonymous - person A can send queries that appear to be coming from person B.
	  </p></dd><dt><span class="term">Remotes querying domains for which we are not auth (remote-unauth)</span></dt><dd><p>
	    It may happen that there are misconfigured hosts on the internet which are configured to
	    think that a PDNS installation is in fact a resolving nameserver. These hosts will not
	    get useful answers from PDNS. This buffer lists hosts sending queries for domains which 
	    PDNS does not know about.
	  </p></dd><dt><span class="term">Queries that could not be answered due to backend errors (servfail-queries)</span></dt><dd><p>
	    For one reason or another, a backend may be unable to extract answers for a certain domain from
	    its storage. This may be due to a corrupt database or to inconsistent data. When this happens,
	    PDNS sends out a 'servfail' packet indicating that it was unable to answer the question. This buffer
	    shows which queries have been causing servfails.
	  </p></dd><dt><span class="term">Queries for domains that we are not authoritative for (unauth-queries)</span></dt><dd><p>
	    If a domain is delegated to a PDNS instance, but the backend is not made aware of this fact, questions come
	    in for which no answer is available, nor is the authority. Use this ringbuffer to spot such queries.
	  </p></dd></dl></div><p>
  </p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="all-settings.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="types.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 19. Index of all Authoritative Server settings </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 21. Supported record types and their storage</td></tr></table></div></body></html>
