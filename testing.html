<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>2. Testing your install</title><link rel="stylesheet" href="docbook.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /><link rel="home" href="index.html" title="PowerDNS manual" /><link rel="up" href="installing-on-unix.html" title="Chapter 2. Installing on Unix" /><link rel="prev" href="installing-on-unix.html" title="Chapter 2. Installing on Unix" /><link rel="next" href="pdns-on-unix.html" title="3. Running PDNS on unix" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. Testing your install</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="installing-on-unix.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Installing on Unix</th><td width="20%" align="right"> <a accesskey="n" href="pdns-on-unix.html">Next</a></td></tr></table><hr /></div><div class="sect1" title="2. Testing your install"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="testing"></a>2. Testing your install</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="testing.html#id404300">2.1. Typical errors</a></span></dt></dl></div><p>
	After installing, it is a good idea to test the basic functionality of the software before configuring database backends.
	For this purpose, PowerDNS contains the 'bindbackend' which has a domain built in example.com, which is
	officially reserved for testing.

	To test, edit <code class="filename">pdns.conf</code> and add the following if not already present:
	
	</p><pre class="screen">
	  launch=bind
	  bind-example-zones
	</pre><p>

	</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="warning.png" /></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>
	    As of 2.9.21, the BIND backend no longer features the 'bind-example-zones' command. These will return in 2.9.22.
	  </p></td></tr></table></div><p>

	This configures powerdns to 'launch' the bindbackend, and enable the example zones. To fire up PDNS in testing mode, execute: 
	<span class="command"><strong>/etc/init.d/pdns monitor</strong></span>, where you may have to substitute the location of your SysV init.d location you 
	specified earlier.

	In monitor mode, the pdns process runs in the foreground and is very verbose, which is perfect for testing your install.
	
	If everything went all right, you can query the example.com domain like this:
	</p><pre class="screen">
	  <span class="command"><strong>host www.example.com 127.0.0.1</strong></span>
	</pre><p>
	www.example.com should now have IP address 1.2.3.4. The <span class="command"><strong>host</strong></span> command can usually be found in the dnsutils 
	package of your operating system. Alternate command is: <span class="command"><strong>dig www.example.com A @127.0.0.1</strong></span> or even 
	<span class="command"><strong>nslookup www.example.com 127.0.0.1</strong></span>, although nslookup is not advised for DNS diagnostics.

	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	      example.com SOA record
	    </p></li><li class="listitem"><p>
	      example.com NS record pointing to ns1.example.com
	    </p></li><li class="listitem"><p>
	      example.com NS record pointing to ns2.example.com
	    </p></li><li class="listitem"><p>
	      example.com MX record pointing to mail.example.com
	    </p></li><li class="listitem"><p>
	      example.com MX record pointing to mail1.example.com
	    </p></li><li class="listitem"><p>
	      mail.example.com A record pointing to 4.3.2.1
	    </p></li><li class="listitem"><p>
	      mail1.example.com A record pointing to 5.4.3.2
	    </p></li><li class="listitem"><p>
	      ns1.example.com A record pointing to 4.3.2.1
	    </p></li><li class="listitem"><p>
	      ns2.example.com A record pointing to 5.4.3.2
	    </p></li><li class="listitem"><p>
	      host-0 to host-9999.example.com A record pointing to 2.3.4.5
	    </p></li></ul></div><p>

	When satisfied that basic functionality is there, type <span class="command"><strong>QUIT</strong></span> to exit the monitor mode. 
	The adventurous may also type <span class="command"><strong>SHOW *</strong></span> to see some internal statistics. 

	In case of problems, you will want to read the following section.
      </p><div class="sect2" title="2.1. Typical errors"><div class="titlepage"><div><div><h3 class="title"><a id="id404300"></a>2.1. Typical errors</h3></div></div></div><p>
	  At this point some things may have gone wrong. Typical errors include:
	  </p><div class="variablelist"><dl><dt><span class="term"><span class="errortype">binding to UDP socket: Address already in use</span></span></dt><dd><p>
		  This means that another nameserver is listening on port 53 already. You can resolve this problem
		  by determining if it is safe to shutdown the nameserver already present, and doing so. If uncertain,
		  it is also possible to run PDNS on another port. To do so, add <span class="command"><strong>local-port=5300</strong></span> to
		  <code class="filename">pdns.conf</code>, and try again. This however implies that you can only test your nameserver
		  as clients expect the nameserver to live on port 53.
		</p></dd><dt><span class="term"><span class="errortype">binding to UDP socket: Permission denied</span></span></dt><dd><p>
		  You must be superuser in order to be able to bind to port 53. If this is not a possibility,
		  it is also possible to run PDNS on another port. To do so, add <span class="command"><strong>local-port=5300</strong></span> to
		  <code class="filename">pdns.conf</code>, and try again. This however implies that you can only test your nameserver
		  as clients expect the nameserver to live on port 53.
		</p></dd><dt><span class="term"><span class="errortype">Unable to launch, no backends configured for querying</span></span></dt><dd><p>
		  PDNS did not find the <span class="command"><strong>launch=bind</strong></span> instruction in pdns.conf.
		</p></dd><dt><span class="term"><span class="errortype">Multiple IP addresses on your server, PDNS sending out answers on the wrong one</span>, </span><span class="term"><span class="errortype">Massive amounts of 'recvfrom gave error, ignoring: Connection refused'</span></span></dt><dd><p>
		  If you have multiple IP addresses on the internet on one machine, UNIX often sends out answers over another interface
		  than which the packet came in on. In such cases, use <span class="command"><strong>local-address</strong></span> to bind to specific IP addresses, which
		  can be comma separated. The second error comes from remotes disregarding answers to questions it didn't ask to that IP address
		  and sending back ICMP errors.
		</p></dd></dl></div><p>
	</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="installing-on-unix.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="installing-on-unix.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="pdns-on-unix.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 2. Installing on Unix </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 3. Running PDNS on unix</td></tr></table></div></body></html>
